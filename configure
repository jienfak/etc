#!/bin/sh

rpath="$(dirname `realpath $0`)"
. $rpath/rc/profile

arg="$@"
lns () {
	to="$1"
	shift
	from="$@"
	rm $arg $from
	for i in $from ; do
		ln -s $arg "$to" "$i"
	done
}

mkdir -p "$XDG_CONFIG_HOME"
# Config dir.
for i in $ETC/config/* ; do
	lns "$i" "$XDG_CONFIG_HOME/`basename $i`"
done
# Run commands dir.
for i in $ETC/rc/*  ; do
	lns "$i" "$HOME/.`basename $i`"
done
# Bash and zsh profiles have to be just profile.
lns "$HOME/.profile" "$HOME/.zprofile" "$HOME/.bash_profile"
# Make neovim the same as vim.
lns "$HOME/.vim" "$XDG_CONFIG_HOME/nvim"
lns "$HOME/.vimrc" "$XDG_CONFIG_HOME/nvim/init.vim"
# Make Xresources as Xdefaults
lns "$HOME/.Xresources" "$HOME/.Xdefaults"
# Dirs.
mkdir -p $HOME/mnt /$HOME/drv $HOME/tmp
